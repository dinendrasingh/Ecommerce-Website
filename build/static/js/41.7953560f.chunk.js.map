{"version":3,"sources":["functions/coupon.js","pages/admin/coupon/CreateCouponPage.js","components/nav/AdminNav.js"],"names":["getCoupons","a","axios","get","process","removeCoupon","couponId","authtoken","delete","headers","createCoupon","coupon","post","CreateCouponPage","useState","name","setName","expiry","setExpiry","discount","setDiscount","loading","setLoading","coupons","setCoupons","user","useSelector","state","useEffect","loadAllCoupons","then","res","data","className","AdminNav","onSubmit","e","preventDefault","token","toast","success","catch","err","console","log","type","onChange","target","value","autoFocus","required","selected","Date","date","length","scope","map","c","toLocaleDateString","DeleteOutlined","onClick","_id","window","confirm","error","to"],"mappings":"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","file":"static/js/41.7953560f.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const getCoupons = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/coupons`);\r\n\r\nexport const removeCoupon = async (couponId, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createCoupon = async (coupon, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/coupon`,\r\n    { coupon },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport {\r\n  getCoupons,\r\n  removeCoupon,\r\n  createCoupon,\r\n} from \"../../../functions/coupon\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\n\r\nconst CreateCouponPage = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [expiry, setExpiry] = useState(\"\");\r\n  const [discount, setDiscount] = useState(\"\");\r\n  const [loading, setLoading] = useState(\"\");\r\n  const [coupons, setCoupons] = useState([]);\r\n\r\n  // redux\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadAllCoupons();\r\n  }, []);\r\n\r\n  const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    // console.table(name, expiry, discount);\r\n    createCoupon({ name, expiry, discount }, user.token)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        loadAllCoupons(); // load all coupons\r\n        setName(\"\");\r\n        setDiscount(\"\");\r\n        setExpiry(\"\");\r\n        toast.success(`\"${res.data.name}\" is created`);\r\n      })\r\n      .catch((err) => console.log(\"create coupon err\", err));\r\n  };\r\n\r\n  const handleRemove = (couponId) => {\r\n    if (window.confirm(\"Delete?\")) {\r\n      setLoading(true);\r\n      removeCoupon(couponId, user.token)\r\n        .then((res) => {\r\n          loadAllCoupons(); // load all coupons\r\n          setLoading(false);\r\n          toast.error(`Coupon \"${res.data.name}\" deleted`);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col-md-10\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading...</h4>\r\n          ) : (\r\n            <h4>Coupon</h4>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Name</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                onChange={(e) => setName(e.target.value)}\r\n                value={name}\r\n                autoFocus\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Discount %</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                onChange={(e) => setDiscount(e.target.value)}\r\n                value={discount}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Expiry</label>\r\n              <br />\r\n              <DatePicker\r\n                className=\"form-control\"\r\n                selected={new Date()}\r\n                value={expiry}\r\n                onChange={(date) => setExpiry(date)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Save</button>\r\n          </form>\r\n\r\n          <br />\r\n\r\n          <h4>{coupons.length} Coupons</h4>\r\n\r\n          <table className=\"table table-bordered\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th scope=\"col\">Name</th>\r\n                <th scope=\"col\">Expiry</th>\r\n                <th scope=\"col\">Discount</th>\r\n                <th scope=\"col\">Action</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {coupons.map((c) => (\r\n                <tr key={c._id}>\r\n                  <td>{c.name}</td>\r\n                  <td>{new Date(c.expiry).toLocaleDateString()}</td>\r\n                  <td>{c.discount}%</td>\r\n                  <td>\r\n                    <DeleteOutlined\r\n                      onClick={() => handleRemove(c._id)}\r\n                      className=\"text-danger pointer\"\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateCouponPage;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => (\r\n  <nav>\r\n    <ul className=\"nav flex-column\">\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n          Dashboard\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/product\" className=\"nav-link\">\r\n          Product\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/products\" className=\"nav-link\">\r\n          Products\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/category\" className=\"nav-link\">\r\n          Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/sub\" className=\"nav-link\">\r\n          Sub Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n          Coupon\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/user/password\" className=\"nav-link\">\r\n          Password\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default AdminNav;\r\n"],"sourceRoot":""}