(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[42],{1151:function(e,t,n){"use strict";n.r(t);var r=n(29),c=n(103),a=n(0),s=n(22),o=n(40),u=n(143),i=n(976),p=n.n(i),d=(n(1076),n(2));t.default=function(e){var t=e.history,n=Object(a.useState)([]),i=Object(c.a)(n,2),h=i[0],l=i[1],b=Object(a.useState)(0),j=Object(c.a)(b,2),f=j[0],O=j[1],m=Object(a.useState)(""),x=Object(c.a)(m,2),k=x[0],v=x[1],y=Object(a.useState)(!1),w=Object(c.a)(y,2),g=w[0],C=w[1],N=Object(a.useState)(""),P=Object(c.a)(N,2),S=P[0],A=P[1],D=Object(a.useState)(0),E=Object(c.a)(D,2),R=E[0],T=E[1],I=Object(a.useState)(""),_=Object(c.a)(I,2),U=_[0],L=_[1],J=Object(s.b)(),F=Object(s.c)((function(e){return Object(r.a)({},e)})),G=F.user,H=F.COD,$=Object(s.c)((function(e){return e.coupon}));Object(a.useEffect)((function(){Object(u.f)(G.token).then((function(e){console.log("user cart res",JSON.stringify(e.data,null,4)),l(e.data.products),O(e.data.cartTotal)}))}),[]);var q=function(){Object(u.j)(G.token,k).then((function(e){e.data.ok&&(C(!0),o.b.success("Address saved"))}))},z=function(){console.log("send coupon to backend",S),Object(u.b)(G.token,S).then((function(e){console.log("RES ON COUPON APPLIED",e.data),e.data&&(T(e.data),J({type:"COUPON_APPLIED",payload:!0})),e.data.err&&(L(e.data.err),J({type:"COUPON_APPLIED",payload:!1}))}))};return Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-md-6",children:[Object(d.jsx)("h4",{children:"Delivery Address"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{theme:"snow",value:k,onChange:v}),Object(d.jsx)("button",{className:"btn btn-primary mt-2",onClick:q,children:"Save"})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("h4",{children:"Got Coupon?"}),Object(d.jsx)("br",{}),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{onChange:function(e){A(e.target.value),L("")},value:S,type:"text",className:"form-control"}),Object(d.jsx)("button",{onClick:z,className:"btn btn-primary mt-2",children:"Apply"})]}),Object(d.jsx)("br",{}),U&&Object(d.jsx)("p",{className:"bg-danger p-2",children:U})]}),Object(d.jsxs)("div",{className:"col-md-6",children:[Object(d.jsx)("h4",{children:"Order Summary"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("p",{children:["Products ",h.length]}),Object(d.jsx)("hr",{}),h.map((function(e,t){return Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:[e.product.title," (",e.color,") x ",e.count," ="," ",e.product.price*e.count]})},t)})),Object(d.jsx)("hr",{}),Object(d.jsxs)("p",{children:["Cart Total: ",f]}),R>0&&Object(d.jsxs)("p",{className:"bg-success p-2",children:["Discount Applied: Total Payable: $",R]}),Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-md-6",children:H?Object(d.jsx)("button",{className:"btn btn-primary",disabled:!g||!h.length,onClick:function(){Object(u.c)(G.token,H,$).then((function(e){console.log("USER CASH ORDER CREATED RES ",e),e.data.ok&&("undefined"!==typeof window&&localStorage.removeItem("cart"),J({type:"ADD_TO_CART",payload:[]}),J({type:"COUPON_APPLIED",payload:!1}),J({type:"COD",payload:!1}),Object(u.e)(G.token),setTimeout((function(){t.push("/user/history")}),1e3))}))},children:"Place Order"}):Object(d.jsx)("button",{className:"btn btn-primary",disabled:!g||!h.length,onClick:function(){return t.push("/payment")},children:"Place Order"})}),Object(d.jsx)("div",{className:"col-md-6",children:Object(d.jsx)("button",{disabled:!h.length,onClick:function(){"undefined"!==typeof window&&localStorage.removeItem("cart"),J({type:"ADD_TO_CART",payload:[]}),Object(u.e)(G.token).then((function(e){l([]),O(0),T(0),A(""),o.b.success("Cart is emapty. Contniue shopping.")}))},className:"btn btn-primary",children:"Empty Cart"})})]})]})]})}},143:function(e,t,n){"use strict";n.d(t,"k",(function(){return u})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return f})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return m}));var r=n(12),c=n.n(r),a=n(13),s=n(24),o=n.n(s),u=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/cart"),{cart:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/address"),{address:n},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/cart/coupon"),{coupon:n},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/order"),{stripeResponse:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/orders"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/wishlist"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.put("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/wishlist/").concat(t),{},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/wishlist"),{productId:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("https://ecommerce-electronic.herokuapp.com/api","/user/cash-order"),{couponApplied:r,COD:n},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=42.745d7354.chunk.js.map